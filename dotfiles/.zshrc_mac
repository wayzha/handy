# path
export PATH=$(brew --prefix)/opt/python/libexec/bin:$(brew --prefix)/bin:/usr/local/bin:$PATH

# brew env
eval "$(brew shellenv)"
export HOMEBREW_API_DOMAIN=https://mirrors.ustc.edu.cn/homebrew-bottles/api #brew.idayer.com
export HOMEBREW_BOTTLE_DOMAIN=https://mirrors.ustc.edu.cn/homebrew-bottles/bottles #brew.idayer.com

# Alias for mac
alias cb="pbcopy"
alias cb17="ssh mb17 pbcopy"
alias cb17h="ssh h2mb17 pbcopy"
alias cb19="ssh mb19 pbcopy"
alias cb19h="ssh h2mb19 pbcopy"

function lcl {
  LIST_NAME="net.zhangw"
  [ -n "$1" ] && LIST_NAME=$1
  sudo launchctl list | grep -E "$LIST_NAME|sing-box"
}
function lck {
  LAUNCHD_SVC="system/net.zhangw.sshd"
  [ -n "$1" ] && export LAUNCHD_SVC=$1
  sudo launchctl kickstart -k $LAUNCHD_SVC
}
function lcp {
  LAUNCHD_SVC="system/net.zhangw.sshd"
  [ -n "$1" ] && export LAUNCHD_SVC=$1
  sudo launchctl print $LAUNCHD_SVC
}
function los {
	LAUNCHD_SVC_NAME="net.zhangw.sshd"
  [ -n "$1" ] && export LAUNCHD_SVC_NAME=$1
	log show --style syslog --last 10m | grep $LAUNCHD_SVC_NAME
}
	

alias bsl="brew services list"
function bss {
  BREW_SVC="sing-box"
  [ -n "$1" ] && export BREW_SVC=$1
  brew services start $BREW_SVC
}
function bsi {
  BREW_SVC="sing-box"
  [ -n "$1" ] && export BREW_SVC=$1
  brew services info $BREW_SVC
}


# SAP Vault Address
# export VAULT_ADDR='https://vault.tools.sap/'

#Set API token for kubectl-mcp
#https://github.tools.sap/CoLa/kubectl-mcp
#export HOMEBREW_GITHUB_API_TOKEN=$(gh auth token -h github.tools.sap)

#Enable Homebrew completion (~/.zshrc)
if type brew &>/dev/null; then
  FPATH=$(brew --prefix)/share/zsh/site-functions:$FPATH
fi

# Load nvm if ~/.nvm exists
if [ -d "$HOME/.nvm" ]; then
	export NVM_DIR="$HOME/.nvm"
	[ -s "$(brew --prefix)/opt/nvm/nvm.sh" ] && \. "$(brew --prefix)/opt/nvm/nvm.sh"  # This loads nvm
	[ -s "$(brew --prefix)/opt/nvm/etc/bash_completion.d/nvm" ] && \. "$(brew --prefix)/opt/nvm/etc/bash_completion.d/nvm"  # This loads nvm bash_completion
fi

# bun completions
[ -s "$HOME/.bun/_bun" ] && source "$HOME/.bun/_bun"

# bun
export BUN_INSTALL="$HOME/.bun"
export PATH="$BUN_INSTALL/bin:$PATH"

# support local installed claude code
[ -s "$HOME/.claude/local/claude" ] && alias claude="$HOME/.claude/local/claude"

#sdkman
if command -v sdk >/dev/null 2>&1; then
	export SDKMAN_DIR=$(brew --prefix sdkman-cli)/libexec
	[[ -s "${SDKMAN_DIR}/bin/sdkman-init.sh" ]] && source "${SDKMAN_DIR}/bin/sdkman-init.sh"
fi

# enable RBSC token
#source env-rbsc.sh
